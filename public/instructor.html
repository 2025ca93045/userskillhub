<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Instructor Dashboard</title>
</head>
<body>
<h2>Instructor Dashboard</h2>
<ul id="list"></ul>

<script>
async function loadRequests() {
  const list = document.getElementById("list");
  const data = await fetch("/requests").then(r => r.json());
  list.innerHTML = "";

  data.forEach(r => {
    let color = r.status === "accepted" ? "green" :
                r.status === "rejected" ? "red" : "gray";

    list.innerHTML += `
      <li style="color:${color}">
        ${r.student} â†’ ${r.title} [${r.status}]
        <button onclick="act(${r.id},'accepted')">Accept</button>
        <button onclick="act(${r.id},'rejected')">Reject</button>
      </li>`;
  });
}

async function act(id, status) {
  await fetch(`/requests/${id}/${status}`, { method: "POST" });
  loadRequests();
}

// Auto-refresh every 3 seconds
setInterval(loadRequests, 3000);

loadRequests();
</script>
</body>
</html>

